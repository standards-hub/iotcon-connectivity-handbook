__NUXT_JSONP__("/Implementation_ProductionAssetLevel", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){return {data:[{document:{slug:"Implementation_ProductionAssetLevel",description:o,title:"Implementation",position:5,toc:[{id:p,depth:2,text:q},{id:r,depth:l,text:s},{id:t,depth:l,text:u},{id:v,depth:l,text:w},{id:x,depth:l,text:y},{id:z,depth:l,text:A}],body:{type:"root",children:[{type:b,tag:"h2",props:{id:p},children:[{type:b,tag:e,props:{ariaHidden:f,href:"#5-implementation",tabIndex:g},children:[{type:b,tag:h,props:{className:[i,j]},children:[]}]},{type:a,value:q}]},{type:a,value:c},{type:b,tag:m,props:{id:r},children:[{type:b,tag:e,props:{ariaHidden:f,href:"#51-production-asset-level",tabIndex:g},children:[{type:b,tag:h,props:{className:[i,j]},children:[]}]},{type:a,value:s}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The primary purpose of the production assets on the shop floor is to run and optimize the manufacturing processes. They produce or are capable of producing massive amounts of data, and they are the primary source of telemetry data that is available within any level of the technology stack."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"At the OT level, there are many different protocols. Specialized real-time protocols (like Profinet or Powerlink) are often not compatible with the IT systems since the first group often has different ISO \u002F OSI Layers then the standard Ethernet protocol, commonly used by IT systems. For the connection between OT and IT levels, two standards have developed a wide adoption in the last years: OPC UA (Open Platform Communications Unified Architecture) and MQTT (Message Queuing Telemetry Transport). Both protocols are seen as a common factory standard since they are vendor and hardware independent. There are also open-source implementations for a variety of platforms. Most OT device manufacturers have included at least one of these two protocols in their state-of-the-art products. This is the reason why this working group mainly focuses on these two protocols."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"OPC UA should be considered a connectivity implementation because of its widespread use in the manufacturing sector, self-describing behavior, data semantic standardization groups, and support for modern security standards. The OPC UA Foundation standardizes data exchange as a platform-independent, service-oriented architecture (SOA). Many forward-looking implementations such as OPC UA pub\u002Fsub and OPC UA over TSN are specified. However, this whitepaper focuses on the OPC UA client\u002Fserver variant, as it is currently the most widespread. If the implementation of OPC UA is not reasonable or applicable, the use of MQTT as a transport protocol is a valid alternative. The choice of data formats and transport protocols should be considered based on the specific use case. For example, for a lightweight IoT sensor, a complex OPC UA implementation may not be possible due to hardware limitations."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Due to high adaptation costs in operational production facilities, there are still many legacy protocol standards, which have been in use for more than 20 years (e.g., Siemens S7 protocol). If OPC UA or MQTT is not natively supported, an adapter on the production asset level is a good solution to transform data from the proprietary asset interface to OPC UA or MQTT. An alternate solution is the installation of a software adapter at the edge level where the data is filtered, combined, and converted to the northbound edge protocol (MQTT). The overall goal is to transform and harmonize the data as early as possible in the communication process."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"On the communication side, telemetry is typically passed to the higher network levels. Only minimal processing, filtering, compressing, and aggregating are done at the asset level. Instead, the machines are configured to efficiently pass information to other assets optimized for these compute-heavy functions, e.g., edge nodes."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"In most circumstances, the shop floor machines are recipients of control and management information, acting on commands passed down from higher levels and generated from more complex and comprehensive models. Besides the “traditional” control mechanisms via PLCs, there is also the possibility of having a control model at the edge level. An example could be a machine learning model that evaluates telemetry data and sends control commands (e.g., updated parameters) via the edge adapter down to the asset. Device management communication is used to discover endpoints and specify which data points should be streamed in the telemetry messages. Also, the management of the device’s firmware lies in this domain. Security is the third aspect, with the possibility to set and change encryption mechanisms and security tokens (e.g., X.509 certificates)."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Device management must keep the firmware of production assets up to date to secure the production assets, but the primary action necessary to minimize the attack vector is to use firewalls that deny access in general."}]},{type:a,value:c},{type:b,tag:m,props:{id:t},children:[{type:b,tag:e,props:{ariaHidden:f,href:"#52-edge-level",tabIndex:g},children:[{type:b,tag:h,props:{className:[i,j]},children:[]}]},{type:a,value:u}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Edge nodes, whether installed on physical industrial PCs (IPCs) or a virtual edge device in the data center, enable a scalable, secure, and reliable architecture for connecting devices from the production asset level to the edge and cloud layer. Edge computing provides the benefit of applying logic at an immediate level. Different edge modules installed on an edge device take care of the functionality needed for a successful connectivity solution."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Communication modules ensure a secure and stable connection to the assets or other integration services. For modern protocols, like OPC UA and MQTT there are already various modules available, whereas proprietary protocols require vendor-specific communication modules. Additionally, cloud communication modules actively connected to the cloud are a vital feature of the edge level. Additional modules handle other functionalities that are necessary for an integrated solution: buffering, filtering, distribution of the messages to further endpoints, or other edge modules (e.g., AI modules), and preprocessing (e.g., message enrichment). The edge layer can run complex logic modules and act as a recipient of trained or updated machine learning models, applying the new logic to incoming data and making determinations from it. Device management modules for monitoring, updating, or security activities on the device are essential to managing large-scale edge ecosystems."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Due to the high volume of telemetry data, efficient processing and forwarding are essential. Filtering, compressing, and aggregating data at the edge can help to avoid overloading the network. Missing metadata is added, data formats get standardized, and short-term network failures can be bridged via buffer functionality. Due to the high volume of data, buffering or storing the data for an extended period on the edge device is not recommended. When making filtering and compression decisions, special attention should be paid to the potential future needs of applications and model training. Optimization for efficient transmission and storage based upon current data needs might result in missing or incomplete data sets for applications in the future. Data might not be recoverable, and the future deficiency needs to be weighed against the current costs of transmission and storage."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Control messages can be received from any layer. A cloud service sends a new production job to the production asset or an AI model that analyzes the edge node’s telemetry data, modifying the current production asset settings. Also, control messages from the production asset to an upper level, like alarm messages, are possible. Besides pure forwarding, control messages can also be intended for the edge device itself, e.g., config update. Due to the intermediate level, communication flows are vitally important, and the transmission of control messages needs to be reliable and secure. As a routing agent, the edge level needs to understand commands and route them throughout the system. If a control message needs to be acknowledged, control responses need to be mapped to the corresponding requests to route it back to the right sender."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Management data related to the production asset has to be interpreted and forwarded to the desired destination. Management data concerning the edge node must be routed between the device management edge modules and device management cloud services. A monitoring component provides logs and metrics, firmware and edge modules get updated, and certificates are renewed. Also, the settings need to be saved on a central service to restore them after a device outage or transfer it to a replacement device."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The edge level is inherently extending the network to remote site locations and increasing the number of possible attack vectors. Building a secure device is challenging, but challenges can be mitigated if we adhere to the principles and practices. Below are the attributes of secured and interconnected devices."}]},{type:a,value:c},{type:b,tag:"ul",props:{},children:[{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"Hardware-based root of trust: Physical measures resist side-channel attacks and protected by hardware"}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"Small trusted computing base:  Private keys stored in the hardware protected vault and make it inaccessible to any software"}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"Compartmentalization: Hardware-enforced barriers between software components prevent a breach in one from propagating to others."}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"Certificate-based authentication: Signed certificate, proven by unforgeable cryptographic key, proves the device identity and authenticity."}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"Renewable security: Renewal brings the device forward to a secure state and revokes compromised assets for known vulnerabilities or security breaches"}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"Failure reporting: Any failure-probing security is reported to the failure analysis system"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"While edge devices typically provide the capability to run containerized software, the software management must be checking the base images for vulnerabilities and providing update paths that ensure smooth operations."}]},{type:a,value:c},{type:b,tag:m,props:{id:v},children:[{type:b,tag:e,props:{ariaHidden:f,href:"#53-cloud-level",tabIndex:g},children:[{type:b,tag:h,props:{className:[i,j]},children:[]}]},{type:a,value:w}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Cloud services make use of flexibility, high computing power, and large storage capacities. In order to connect these services to shop floor equipment, a service is necessary that acts as the interface for receiving and sending messages to and from the lower levels. Thereby the data can be analyzed, visualized, and longtime stored. For example, cloud computing power can be used to train machine learning models based on data from the shop floor."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The Cloud Integration Hub is the cloud endpoint for any data receiving and sending to the lower levels, independent of the communication type. For security reasons, no upper level should actively establish a connection to a lower level. That’s why the Cloud Integration Hub is a passive service. Edge nodes or OT devices can connect to the service and get authorized by providing credentials. The Cloud Integration Hub doesn’t have to be one component. It might also be feasible that there are different components for different purposes and communication types."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For telemetry messages, a streaming-based solution optimized for high data throughput is recommended. Simple integration interfaces for other cloud services and an ability to distribute the data to different services should be supported."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"As control data flows are bidirectional, two interfaces are necessary for sending and receiving control messages. The reliable transmission of the messages should be the focus."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Management data is received, sent, and stored by the Device Management Service. The Service provides provisioning, operating, and monitoring functionality for edge nodes and OT devices. It can install and update the firmware, manage the edge container, and supervise the security status of the devices. In addition, it stores all device-related information like device name, IP (Internet Protocol) address, configurations, installed edge container, and firmware status. If a device exchange is necessary, the information can be transferred to a new device."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"From a security point of view, the cloud level provides centralized certificate management as well as identity and access control (IAC). Certificate management is essential to secure communication. The management needs to provide creation, renewal, revocation, and updated for all devices over the whole device lifecycle. The IAC is protected from unwanted modifications and can be used in combination with audit logs. As a best practice, the IAC should provide service principles to allow device management in unattended mode (e.g., to renew device certificates)."}]},{type:a,value:c},{type:b,tag:m,props:{id:x},children:[{type:b,tag:e,props:{ariaHidden:f,href:"#54-the-interface-between-production-asset-and-edge-levels",tabIndex:g},children:[{type:b,tag:h,props:{className:[i,j]},children:[]}]},{type:a,value:y}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The interface between production assets and edge level compute resources is usually a proprietary and vendor-specific implementation, dependent upon pre-existing installations and pre-programmed interactions. While some solutions are greenfield installations, this is not the predominant case for most manufacturers. Compute resources are generally limited on either side, and communication is optimized for efficiency and maintenance of the production line. These factors mean any connectivity solution must be built within the context of the existing assets and limitations. Telemetry data is passed up to the edge level while command and managerial data is transferred back-and-forth to manage the operations and maintenance of the production level assets."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Due to the reasons given in a previous section, an OPC UA client\u002Fserver is often the first choice for communication at this interface level. An edge device, via an OPC UA client interface, consumes the OT asset providing an OPC UA server interface. To pass telemetry data, the client can browse, read, and subscribe to OPC UA nodes and call OPC UA methods to obtain and transfer data. For commands, the edge device can also communicate with OT assets to perform functions such as browsing and writing OPC UA nodes and utilizing methods to make changes."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"In many brownfield installations, both OPC UA and MQTT are not available, or it is not practical to upgrade the communication technology. In this case, adapters are needed to convert formats between proprietary protocols and promote standardization and interoperability. Adapters can be installed directly on the OT machines, and thus their presence and function are largely invisible to the rest of the system. This setup requires coordination between the asset vendor and the chosen target protocol. The adapter could also be installed on an IPC at an intermediate level between the production asset and edge layer, or it could be obtained through a marketplace and installed on the edge layer. Each setup requires different amounts of coordination with the asset manufacturer and forethought. Still, they all result in standardization and adherence to the OMP principle of interoperability beyond the edge level."}]},{type:a,value:c},{type:b,tag:m,props:{id:z},children:[{type:b,tag:e,props:{ariaHidden:f,href:"#55-the-interface-between-edge-and-cloud",tabIndex:g},children:[{type:b,tag:h,props:{className:[i,j]},children:[]}]},{type:a,value:A}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Conveying data from the edge into the cloud via a streaming approach helps leverage independent cloud providers and drives a modular approach. Standardization takes place at the edge, and upstream computing can then be modularized to leverage best-in-class technology and capabilities. Plain MQTT or AMQP (Advanced Message Queuing Protocol) could be used, but a more forward-looking approach is OPC UA pub\u002Fsub. Standardization takes place at the edge, and upstream computing can then be modularized to leverage best-in-class technology and capabilities. OPC UA pub\u002Fsub, in contrast to plain MQTT or AMQP, does not require any transformation and therefore it is seen as the most promising candidate. Given the availability on this level, OPC UA pub\u002Fsub, which can use, for example, MQTT or AMQP, is the first choice for telemetry data because of the standardization, availability at the edge, and serialization capabilities."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"With telemetry using OPC UA pub\u002Fsub, the edge provides an OPC UA publisher interface that can connect to one or more cloud-side MQTT\u002FAMQP broker. In this case, clients connect to the MQTT\u002FAMQP broker and consume messages. It is also possible to use a broker-less publisher-subscriber direct connection (using datagram protocols as UDP for transport)."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"If control from asset level to edge level is required, it is preferable that the edge level has an OPC UA server interface. If not possible, an approach where the asset sets values in its OPC UA server and the edge device (as an OPC UA Client) reacts on it is also feasible. The client needs to be notified as changes occur, e.g., by subscriptions or registered reads. For example, a data threshold for a machine learning model can be set on the server-side (asset). The client (edge) pulls these values and feeds the new threshold into its model; thus, the server indirectly controls the client by telemetry."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The predominant category of communication from cloud to edge is either command or managerial. Telemetry is not typically passed in this direction. The drivers of the data are the functions, logic, and intelligence applied in the cloud, which is then translated into command and management data to be passed down into the edge layer. The communication typically results in an action, either within the edge device or production assets. For example, parameters such as filters, logic, frequency, or timing could be altered based upon the learnings in the cloud."}]},{type:a,value:c},{type:b,tag:n,props:{},children:[]},{type:a,value:c},{type:b,tag:"b",props:{},children:[{type:a,value:c},{type:b,tag:"figure",props:{},children:[{type:a,value:B},{type:b,tag:"img",props:{src:"images\u002Fdevice-management.png",alt:"Device Management"},children:[]},{type:a,value:B},{type:b,tag:"figcaption",props:{},children:[{type:b,tag:n,props:{},children:[]},{type:a,value:"Figure 4: Cloud-based Device Management App"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[]},{type:a,value:c},{type:b,tag:n,props:{},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For example, as depicted in Figure 4, a device management solution provides management capabilities for edge devices. There are three edge devices from two different vendors that require specific communication. In order to abstract the device management solution away from the proprietary devices, the cloud gateways provide an open unified interface to control the edge devices. Examples of typical commands include start, stop, update firmware, renewal of certificates, download files as a trained machine learning model, and upload files."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The open interface receives commands from cloud applications while the propriety channel enables communication down to specific edge devices. The advantage of an open interface is that it is interoperable with any public cloud provider utilizing standard compute resources or cloud services. For the same reason, an edge container, enabling proprietary communication, should have an open interface to manage the connection settings."}]}]},dir:"\u002Fen",path:"\u002Fen\u002FImplementation_ProductionAssetLevel",extension:".md",createdAt:C,updatedAt:C,to:"\u002FImplementation_ProductionAssetLevel",category:o},prev:{title:"Type of Communication",path:"\u002Fen\u002FType_of_Communication",to:"\u002FType_of_Communication"},next:{title:"Conclusion",path:"\u002Fen\u002FConclusion",to:"\u002FConclusion"}}],fetch:{},mutations:[]}}("text","element","\n","p","a","true",-1,"span","icon","icon-link","li",3,"h3","br","","5-implementation","5 Implementation","51-production-asset-level","5.1\tProduction Asset Level","52-edge-level","5.2\tEdge Level","53-cloud-level","5.3\tCloud Level","54-the-interface-between-production-asset-and-edge-levels","5.4\tThe interface between Production Asset and Edge Levels","55-the-interface-between-edge-and-cloud","5.5\tThe interface between Edge and Cloud","\n\t","2021-03-16T13:35:20.132Z")));